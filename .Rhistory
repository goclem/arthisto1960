tiles        <- st_read("/Users/clementgorin/Dropbox/research/arthisto/data_1950/tiles/maps_1950.shp")
tiles
names(tiles) <- c("id", "edition_year", "legend_id", "number_colors", "geometry")
tiles$legend_id <- gsub("Type ", "", tiles$legend_id)
tiles
pacman::p_load(sf)
tiles        <- st_read("/Users/clementgorin/Dropbox/research/arthisto/data_1950/tiles/maps_1950.shp")
names(tiles) <- c("id", "edition_year", "legend_id", "number_colors", "geometry")
tiles$legend_id <- gsub("Type ", "", tiles$legend_id)
tiles
table(tiles$edition_year)
table(tiles$edition_year %in% seq(1950:1959))
table(tiles$edition_year %in% 1950:1959)
prop.table(table(tiles$edition_year %in% 1950:1959))
0,075*3
0.075*3
.1+0.075*3
pacman::p_load(dplyr, rgeos, sf)
maps  <- st_read("~/Dropbox/research/arthisto/data_1950/tiles/maps_1950.shp")
tiles <- st_read("~/Dropbox/research/arthisto/data_1950/tiles/tiles_1950.mif")
st_crs(tiles) <- st_crs(maps)
itsec  <- st_intersection(tiles, maps)
diff   <- st_difference(tiles, st_union(itsec))
diff   <- merge(diff, st_drop_geometry(itsec)[match(diff$NOM, itsec$NOM), ])
itsec  <- rbind(itsec, diff)
itsec
itsec  <- select(itsec, -c(NOM_CARTE, TYPE_CARTE, NB_COULEUR))
itsec  <- select(itsec, -c(NOM_CARTE, TYPE_CARTO, NB_COULEUR))
dupid  <- group_indices(itsec, NOM, ANNEE_EDIT)
joined <- gUnaryUnion(as(itsec, "Spatial"), id = dupid)
data   <- st_drop_geometry(itsec)[match(as.numeric(names(joined)), dupid), ]
joined <- SpatialPolygonsDataFrame(joined, data, F)
joined <- st_as_sf(joined)
names(joined) <- tolower(names(joined))
joined
joined <- st_simplify(joined, dTolerance = 50)
st_write(joined, "~/Dropbox/research/arthisto/data_1950/tiles/tile_year.shp", delete_layer = T)
1963-1926
tiles        <- st_read("/Users/clementgorin/Dropbox/research/arthisto/data_1950/tiles/maps_1950.shp")
names(tiles) <- c("id", "edition_year", "legend_id", "number_colors", "geometry")
tiles$legend_id <- gsub("Type ", "", tiles$legend_id)
tiles
tiles
tiles[tiles$legend_id == "M"]
tiles[tiles$legend_id == "M", ]
tiles[tiles$legend_id == "M", edition$year]
tiles[tiles$legend_id == "M", "edition_year"]
table(tiles[tiles$legend_id == "M", "edition_year"][[1]])
pacman::p_load(sf)
tiles        <- st_read("/Users/clementgorin/Dropbox/research/arthisto/data_1950/tiles/maps_1950.shp")
tiles
summary(tiles$ANNEE_EDIT[tiles$TYPE_CARTO == "Type N"])
